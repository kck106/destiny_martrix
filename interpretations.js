// 데스티니 매트릭스 숫자별 해석 데이터
const INTERPRETATIONS = {
    1: {
        personality: "강한 리더십과 독립성을 가진 당신은 새로운 것을 시작하는 데 뛰어난 능력을 보입니다. 도전 정신이 뛰어나고 추진력이 강하며, 독창적이고 유연한 사고를 가지고 있습니다. 자연스럽게 앞장서는 것을 좋아하며, 다른 사람들에게 영감을 주는 능력이 있습니다. 결정력이 빠르고 목표 지향적인 성격으로, 어려운 상황에서도 포기하지 않는 의지력을 보여줍니다.",
        talents: "창의적 아이디어 구현 능력, 프로젝트 시작과 추진력, 팀을 이끄는 카리스마적 리더십, 독립적인 판단력, 혁신적인 사고방식, 위기 상황에서의 결단력, 새로운 분야 개척 능력",
        challenges: "때로는 고집이 세서 다른 의견을 받아들이기 어려워할 수 있습니다. 성급하게 결정을 내리거나, 혼자서 모든 것을 해결하려는 경향으로 인해 주변 사람들과의 협력에 어려움을 겪을 수 있습니다. 완벽주의적 성향이 스트레스를 유발할 수도 있습니다.",
        advice: "자신의 목표와 비전을 확고하게 설정하되, 다른 사람들의 조언과 피드백에도 열린 마음으로 귀 기울이세요. 리더로서의 책임감을 받아들이고, 자신감을 유지하면서도 겸손함을 잊지 마세요. 인내심을 기르고, 팀워크의 중요성을 인식하는 것이 당신의 성장에 도움이 될 것입니다."
    },
    2: {
        personality: "평화와 조화를 사랑하고 협동을 중시하는 당신은 뛰어난 공감 능력과 섬세한 감정을 가지고 있습니다. 객관적이고 균형 잡힌 시각으로 상황을 바라보며, 다른 사람들 사이의 중재자 역할을 자연스럽게 담당합니다. 서포터 역할에서 진가를 발휘하며, 파트너십과 협력 관계에서 빛을 발합니다.",
        talents: "뛰어난 공감력과 경청 능력, 갈등 조정과 중재 기술, 팀워크와 협력 관리, 섬세한 관찰력과 직관, 다른 사람을 돕고 지원하는 능력, 외교적 소통 기술, 세심한 배려와 케어",
        challenges: "우유부단하거나 결정을 내리는 데 시간이 오래 걸릴 수 있습니다. 자신의 의견보다 타인의 것을 우선시하여 자아를 잃을 위험이 있으며, 갈등 상황에서 스트레스를 많이 받을 수 있습니다. 과도한 배려로 인해 자신이 소외되는 경우가 있을 수 있습니다.",
        advice: "타인과의 균형을 맞추되, 자신의 목소리와 의견도 소중하게 여기는 법을 배우세요. 자신감을 키우고, 때로는 주도적으로 나서는 것도 필요합니다. 자신만의 가치와 신념을 확립하고, 건강한 경계선 설정을 통해 자기 돌봄의 시간을 반드시 가지시기 바랍니다."
    },
    3: {
        personality: "밝고 창의적인 에너지를 가진 당신은 뛰어난 표현력과 소통 능력을 자랑합니다. 호기심이 많고 솔직하며, 직감이 매우 뛰어납니다. 예술적 감각이 풍부하고 즐거움을 추구하는 성향이 있어 주변 사람들에게 활력과 영감을 줍니다. 사교적이고 매력적인 성격으로 많은 사람들에게 사랑받습니다.",
        talents: "예술적 표현력과 창작 능력, 창의적 아이디어 발상과 실현, 뛰어난 커뮤니케이션과 스피치 능력, 유머 감각과 엔터테인먼트 재능, 사람들을 즐겁게 하고 동기부여하는 능력, 트렌드 감각과 문화적 센스",
        challenges: "감정 기복이 크거나 정서적으로 불안정할 수 있습니다. 산만해지기 쉽고, 깊이 있는 사고보다 표면적인 것에 치중할 가능성이 있습니다. 일관성을 유지하는 데 어려움이 있을 수 있으며, 때로는 과도한 자기표현으로 오해를 받을 수 있습니다.",
        advice: "자신의 감정을 안정시키고 내적 균형을 찾는 것이 중요합니다. 창의성을 발휘할 수 있는 분야를 찾아 꾸준히 집중하세요. 깊이 있는 관계와 의미 있는 활동에 시간을 투자하고, 표현의 적절함을 배우는 것이 성장에 도움이 될 것입니다."
    },
    4: {
        personality: "근면성실하고 책임감이 강한 당신은 안정성과 체계성을 무엇보다 중시합니다. 현실주의적이고 실용적인 사고를 가지며, 인내심이 강하고 꾸준함이 최고의 장점입니다. 조직력이 뛰어나고 신뢰할 수 있는 사람으로, 주어진 일을 끝까지 완수하는 끈기를 보여줍니다.",
        talents: "체계적인 계획 수립과 실행, 꾸준한 실행력과 완수 능력, 세심한 관리와 조직 운영, 높은 책임감과 신뢰성, 안정적인 결과 달성, 효율성 개선과 시스템 구축, 장기적 관점의 전략 수립",
        challenges: "때로는 틀에 얽매여 융통성이 부족해 보일 수 있습니다. 변화를 받아들이는 데 시간이 걸리며, 과도하게 완벽을 추구하여 스트레스를 받을 수 있습니다. 새로운 아이디어나 혁신에 대해 보수적인 반응을 보일 수 있습니다.",
        advice: "새로운 시각과 아이디어에 열린 마음을 가지세요. 유연성을 기르고 변화에 적응하는 능력을 개발하는 것이 중요합니다. 완벽주의를 적절히 조절하고, 때로는 계산된 위험을 감수하는 용기도 필요합니다. 혁신과 안정의 균형을 찾아보세요."
    },
    5: {
        personality: "자유롭고 모험심이 강한 당신은 변화와 새로운 경험을 즐기며 삶을 역동적으로 살아갑니다. 활발하고 적응력이 뛰어나며, 다양한 분야에 재능을 보입니다. 여행과 새로운 만남을 좋아하고, 디지털 시대에 잘 적응하는 현대적인 감각을 가지고 있습니다.",
        talents: "뛰어난 적응력과 유연성, 다양한 분야의 능력과 다재다능함, 커뮤니케이션과 네트워킹 스킬, 변화에 대한 민감성과 트렌드 파악, 자유로운 사고와 창의적 접근, 모험 정신과 도전 의지",
        challenges: "변덕스럽거나 일관성이 부족할 수 있습니다. 집중력이 떨어지고, 책임이나 약속을 회피하려는 경향이 있을 수 있습니다. 깊이보다 넓이를 추구하여 전문성이 부족할 수 있으며, 안정성이 부족하다는 평가를 받을 수 있습니다.",
        advice: "자유와 책임의 균형을 배우는 것이 중요합니다. 한 분야에 깊이 있게 집중해보는 경험을 가져보세요. 변화를 추구하되, 기본적인 안정성도 함께 고려하는 지혜가 필요합니다. 장기적인 목표 설정과 꾸준한 실행력을 기르는 것이 성장에 도움이 될 것입니다."
    },
    6: {
        personality: "따뜻하고 책임감이 강한 당신은 조화와 사랑을 최우선으로 생각합니다. 상냥하고 돌봄의 에너지가 강하며, 가정적이고 헌신적인 성격을 가지고 있습니다. 다른 사람의 필요를 잘 파악하고 도움을 주는 것을 자연스럽게 여기며, 아름다움과 예술을 사랑합니다.",
        talents: "돌봄과 치유의 능력, 조화로운 관계 형성과 유지, 가정과 공동체 관리 능력, 예술적 감각과 미적 안목, 봉사 정신과 나눔의 마음, 상담과 조언 능력, 평화로운 환경 조성",
        challenges: "자신을 지나치게 희생하며 타인에게 과도하게 헌신할 수 있습니다. 건강한 경계 설정이 어렵고, 다른 사람의 문제를 자신의 것처럼 받아들여 정서적 소진을 경험할 수 있습니다. 때로는 과보호나 간섭으로 여겨질 수 있습니다.",
        advice: "자기 자신을 소중히 여기고 건강한 경계를 세우는 법을 배우세요. 타인을 돕되, 자신의 필요와 행복도 챙기는 균형을 찾는 것이 중요합니다. 자기 돌봄의 시간을 반드시 가지고, 완벽한 조화보다는 현실적인 조화를 추구하세요."
    },
    7: {
        personality: "깊이 있는 사고를 하고 탐구심이 강한 당신은 지적이고 신비로운 면을 가지고 있습니다. 내성적이며 분석적인 사고를 선호하고, 정신적이고 영적인 분야에 큰 관심을 보입니다. 독립적이고 사색을 즐기며, 진리와 지혜를 추구하는 철학자적 성격을 가지고 있습니다.",
        talents: "깊이 있는 분석력과 논리적 사고, 연구와 탐구 능력, 강한 직관력과 통찰력, 정신적 집중력과 명상 능력, 영적 감수성과 직관, 독립적 사고와 비판적 판단력, 전문 지식 습득 능력",
        challenges: "과도한 회의주의에 빠지거나 내적으로 고립될 수 있습니다. 사회적 관계에서 어려움을 겪을 수 있으며, 실용적인 것보다 이론적인 것을 선호하여 현실 적응이 어려울 수 있습니다. 완벽주의로 인해 결정을 내리지 못하는 경우가 있을 수 있습니다.",
        advice: "내적 고립감에서 벗어나 타인과 연결되는 시간을 의식적으로 가지세요. 이론과 실천의 균형을 맞추고, 현실에 뿌리내리는 것이 중요합니다. 자신의 지식과 통찰을 다른 사람들과 나누며, 사회적 기여를 통해 보람을 찾아보세요."
    },
    8: {
        personality: "강한 야망과 실행력을 가진 당신은 권위와 물질적 성공에 대한 명확한 목표를 가지고 있습니다. 열정적이고 흑백논리가 분명하며, 경영 감각이 뛰어납니다. 강력한 리더십을 가지고 있고 목표 달성을 위해 끊임없이 노력하는 실행형 인재입니다.",
        talents: "경영과 관리 능력, 목표 달성에 대한 강한 의지, 카리스마적 리더십과 권위, 물질적 성공 창출 능력, 실무 실행력과 추진력, 전략적 사고와 계획 수립, 조직 운영과 시스템 구축",
        challenges: "과욕을 부리거나 권력과 성공에 지나치게 집착할 수 있습니다. 물질적 성공에만 치중하여 인간관계나 정신적 가치를 소홀히 할 위험이 있습니다. 타인을 지배하려는 경향이나 독단적인 결정으로 갈등을 일으킬 수 있습니다.",
        advice: "균형 잡힌 권위를 행사하고 타인을 존중하는 리더십을 배우세요. 물질적 성공과 함께 정신적, 감정적 풍요로움도 추구하는 것이 중요합니다. 성공을 나누고 베푸는 마음을 기르며, 진정한 영향력은 강요가 아닌 감화에서 나온다는 것을 기억하세요."
    },
    9: {
        personality: "포용력이 넓고 인도주의적인 성향을 가진 당신은 깊은 공감력과 예술적 감수성을 가지고 있습니다. 관찰력이 뛰어나고 섬세하며, 타인의 아픔을 이해하고 치유하려는 따뜻한 마음을 가지고 있습니다. 완성과 성숙의 에너지를 지니고 있어 지혜로운 조언자 역할을 잘 수행합니다.",
        talents: "깊은 공감력과 이해력, 예술적 창작 능력과 미적 감각, 치유와 상담 능력, 영적 통찰력과 직관, 인도주의적 활동과 봉사, 문제 해결 능력과 지혜, 포용력과 관용",
        challenges: "감정적으로 너무 예민하거나 타인의 고통을 과도하게 받아들여 자신이 소진될 수 있습니다. 과거의 상처나 카르마에 얽매여 앞으로 나아가지 못할 수 있으며, 이상과 현실 사이에서 갈등을 겪을 수 있습니다.",
        advice: "과거의 상처를 치유하고 진정한 용서와 성찰을 통해 성장하는 것이 중요합니다. 타인에 대한 무조건적인 사랑을 실천하되, 자신의 감정을 건강하게 관리하는 법을 배우세요. 완성의 에너지를 활용하여 더 큰 목적과 사명을 찾아보시기 바랍니다."
    },
    11: {
        personality: "강한 직감과 영감을 가진 당신은 특별한 영적 에너지를 가지고 있습니다. 완벽주의적 성향이 있고 개성이 매우 강하며, 높은 이상과 비전을 가지고 있습니다. 다른 사람들에게 영감을 주는 숨겨진 리더십을 가지고 있으며, 창의적이고 혁신적인 사고를 합니다.",
        talents: "강한 직관력과 영감, 비전 제시와 미래 예측 능력, 영적 통찰력과 초감각적 인식, 창의적 아이디어와 혁신, 타인에게 영감을 주는 카리스마, 예술적 창작력, 치유와 상담 능력",
        challenges: "예민하고 감수성이 강하여 스트레스를 많이 받을 수 있습니다. 이상과 현실 사이의 간극으로 좌절하거나 우울감을 느낄 수 있으며, 완벽주의로 인해 실행에 어려움을 겪을 수 있습니다. 에너지 불균형으로 인한 극도의 기복을 경험할 수 있습니다.",
        advice: "높은 이상을 현실로 구현하는 실용적인 방법을 단계별로 학습하세요. 감정 관리와 스트레스 해소법을 익히는 것이 매우 중요합니다. 자신의 영감을 차근차근 실현해 나가는 인내심을 기르고, 명상이나 영적 수행을 통해 에너지를 조절하는 법을 배우세요.",
        masterNumber: "마스터 넘버 11은 '영적 메신저'나 '직관적 리더'의 의미를 가집니다. 당신은 높은 영적 진동과 강력한 직관력을 가지고 있어, 다른 사람들에게 영감과 깨달음을 줄 수 있는 특별한 사명이 있습니다. 이는 큰 잠재력과 함께 더 큰 책임을 의미하며, 세상에 빛을 전하는 역할을 하게 될 것입니다."
    },
    22: {
        personality: "실용적인 이상주의자인 당신은 거대한 프로젝트나 사회적 변화를 실현할 수 있는 특별한 능력을 가지고 있습니다. 노력파이며 현실적인 실천력이 뛰어나고, 큰 그림을 그리면서도 세부사항까지 완벽하게 신경 쓸 수 있는 능력을 보유하고 있습니다.",
        talents: "거대 프로젝트 기획과 실행, 사회적 영향력 창출과 변화 주도, 체계적인 조직 능력과 관리, 실용적 이상주의와 현실적 접근, 장기적 비전 실현 능력, 혁신적 시스템 구축, 대규모 팀 리더십",
        challenges: "너무 큰 책임감과 사명감으로 인해 과도한 스트레스를 받을 수 있습니다. 감정 기복이 클 수 있고, 완벽을 추구하다가 실행이 늦어지거나 기회를 놓칠 수 있습니다. 현실과 이상 사이에서 갈등하며 좌절감을 느낄 수 있습니다.",
        advice: "자신과 인류를 위한 큰 대의를 실현하는 것이 인생의 궁극적 목표입니다. 감정 기복을 관리하고 꾸준함을 유지하는 것이 매우 중요합니다. 큰 꿈을 작은 단계로 나누어 체계적으로 접근하고, 완벽함보다는 지속적인 진전에 집중하세요. 당신의 비전이 세상을 바꿀 힘이 있다는 것을 믿으세요.",
        masterNumber: "마스터 넘버 22는 '마스터 빌더'라고 불리며, 물질 세계에서 영적 이상을 실현하는 특별한 능력을 가지고 있습니다. 당신은 사회나 인류를 위한 큰 변화와 진보를 만들어낼 수 있는 특별한 능력과 사명을 가지고 있으며, 이는 개인의 성공을 넘어 더 큰 목적을 위한 봉사와 기여를 의미합니다."
    }
};

// 해석 데이터 검증 함수 (개선)
function validateInterpretations() {
    const requiredKeys = ['personality', 'talents', 'challenges', 'advice'];
    const masterNumbers = [11, 22];
    let isValid = true;
    
    // 기본 숫자 검증 (1-9)
    for (let number = 1; number <= 9; number++) {
        const interpretation = INTERPRETATIONS[number];
        if (!interpretation) {
            console.error(`❌ Missing interpretation for number: ${number}`);
            isValid = false;
            continue;
        }
        
        for (const key of requiredKeys) {
            if (!interpretation[key] || typeof interpretation[key] !== 'string' || interpretation[key].trim().length === 0) {
                console.error(`❌ Missing or invalid ${key} for number: ${number}`);
                isValid = false;
            }
        }
    }
    
    // 마스터 넘버 검증 (11, 22)
    for (const masterNumber of masterNumbers) {
        const interpretation = INTERPRETATIONS[masterNumber];
        if (!interpretation) {
            console.error(`❌ Missing interpretation for master number: ${masterNumber}`);
            isValid = false;
            continue;
        }
        
        for (const key of [...requiredKeys, 'masterNumber']) {
            if (!interpretation[key] || typeof interpretation[key] !== 'string' || interpretation[key].trim().length === 0) {
                console.error(`❌ Missing or invalid ${key} for master number: ${masterNumber}`);
                isValid = false;
            }
        }
    }

    if (isValid) {
        console.log('✅ All interpretations validated successfully');
    } else {
        console.warn('⚠️ Some interpretation data issues found');
    }
    
    return isValid;
}

// 특정 숫자의 해석 가져오기 (안전한 접근)
function getInterpretation(number) {
    if (!number || (typeof number !== 'number' && typeof number !== 'string')) {
        console.warn(`Invalid number for interpretation: ${number}`);
        return null;
    }
    
    const numericNumber = parseInt(number, 10);
    if (isNaN(numericNumber)) {
        console.warn(`Could not parse number: ${number}`);
        return null;
    }
    
    const interpretation = INTERPRETATIONS[numericNumber];
    if (!interpretation) {
        console.warn(`No interpretation found for number: ${numericNumber}`);
        return null;
    }
    
    return interpretation;
}

// 숫자별 키워드 추출
function getKeywords(number) {
    const interpretation = getInterpretation(number);
    if (!interpretation) return [];
    
    const keywordMap = {
        1: ['리더십', '독립성', '창의성', '혁신'],
        2: ['협력', '조화', '균형', '공감'],
        3: ['표현력', '창의성', '소통', '즐거움'],
        4: ['안정성', '체계성', '책임감', '실용성'],
        5: ['자유', '모험', '변화', '적응력'],
        6: ['사랑', '봉사', '조화', '치유'],
        7: ['지혜', '탐구', '영성', '직관'],
        8: ['성공', '권위', '실현', '리더십'],
        9: ['완성', '봉사', '포용', '지혜'],
        11: ['직감', '영감', '비전', '마스터'],
        22: ['실현', '건설', '변화', '마스터']
    };
    
    return keywordMap[number] || [];
}

// 초기화 시 검증 실행
document.addEventListener('DOMContentLoaded', () => {
    validateInterpretations();
});

// 전역 함수로 내보내기
window.getInterpretation = getInterpretation;
window.getKeywords = getKeywords;
